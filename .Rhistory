simple_abalone_recipe <- recipe(age~.,data = abalone.training)
abalone_recipe <- recipe(age~., data = abalone.training) %>%
step_dummy(all_nominal()) %>%
step_interact(terms = ~type:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight) %>%
#step_interact(terms = ~longest_shell:diameter) %>%
#step_interact(terms = ~shucked_weight:shell_weight)%>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_fit <- fit(lm_workflow, abalone.training)
simple_abalone_recipe <- recipe(age~.,data = abalone.training)
abalone_recipe <- recipe(age~., data = abalone.training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight) %>%
#step_interact(terms = ~longest_shell:diameter) %>%
#step_interact(terms = ~shucked_weight:shell_weight)%>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
simple_abalone_recipe <- recipe(age~.,data = abalone.training)
abalone_recipe <- recipe(age~., data = abalone.training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type_yes:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight) %>%
#step_interact(terms = ~longest_shell:diameter) %>%
#step_interact(terms = ~shucked_weight:shell_weight)%>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
lm_fit <- fit(lm_workflow, abalone.training)
simple_abalone_recipe <- recipe(age~.,data = abalone.training)
abalone_recipe <- recipe(age~., data = abalone.training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type_yes:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight) %>%
#step_interact(terms = ~longest_shell:diameter) %>%
#step_interact(terms = ~shucked_weight:shell_weight)%>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
lm_model <- linear_reg() %>%
set_engine('lm') # create and store a linear regression object
lm_model
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_fit <- fit(lm_workflow, abalone.training)
set.seed(4177) # set seed to make sure the output is stable
data3 = subset(data2, select = -c(rings)) # new dataframe exclude rings
abalone.split <- initial_split(data3, prop = 0.80) # split the data set, then what is the appropriate percentage, may need a new data set since we cannot include rings and age????
abalone_training <- training(abalone.split) # this is training data set
abalone_testing <- testing(abalone.split) # this is testing data set
#abalone.training
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type_yes:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight) %>%
#step_interact(terms = ~longest_shell:diameter) %>%
#step_interact(terms = ~shucked_weight:shell_weight)%>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
data1 <- read.csv('/Users/wentaoyu/Documents/UCSB File/Stats/Pstat131/Pstat131/homework-2/homework-2/data/abalone.csv') # import dataset
#data1 <- read.csv('D:/Github/Pstat131/homework-2/homework-2/data/abalone.csv')
age <- data1[9]+1.5 # extract the rings column since age = rings+1.5
data2 <- cbind(data1,age) # add a new column into the dataframe
names(data2)[10] <- 'age' # rename the new column as age
ggplot(data2, aes(age))+
geom_histogram(col='white', binwidth = 1) # plot the age column using histogram to make it access.
set.seed(4177) # set seed to make sure the output is stable
data3 = subset(data2, select = -c(rings)) # new dataframe exclude rings
abalone_split <- initial_split(data3, prop = 0.80) # split the data set, then what is the appropriate percentage, may need a new data set since we cannot include rings and age????
abalone_training <- training(abalone_split) # this is training data set
abalone_testing <- testing(abalone_split) # this is testing data set
#abalone.training
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type_yes:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight) %>%
#step_interact(terms = ~longest_shell:diameter) %>%
#step_interact(terms = ~shucked_weight:shell_weight)%>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
lm_model <- linear_reg() %>%
set_engine('lm') # create and store a linear regression object
lm_model
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
data1 <- read.csv('/Users/wentaoyu/Documents/UCSB File/Stats/Pstat131/Pstat131/homework-2/homework-2/data/abalone.csv') # import dataset
#data1 <- read.csv('D:/Github/Pstat131/homework-2/homework-2/data/abalone.csv')
age <- data1[9]+1.5 # extract the rings column since age = rings+1.5
data2 <- cbind(data1,age) # add a new column into the dataframe
names(data2)[10] <- 'age' # rename the new column as age
ggplot(data2, aes(age))+
geom_histogram(col='white', binwidth = 1) # plot the age column using histogram to make it access.
set.seed(4177) # set seed to make sure the output is stable
data3 = subset(data2, select = -c(rings)) # new dataframe exclude rings
abalone_split <- initial_split(data3, prop = 0.80) # split the data set, then what is the appropriate percentage, may need a new data set since we cannot include rings and age????
abalone_training <- training(abalone_split) # this is training data set
abalone_testing <- testing(abalone_split) # this is testing data set
#abalone.training
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type_yes:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight) %>%
#step_interact(terms = ~longest_shell:diameter) %>%
#step_interact(terms = ~shucked_weight:shell_weight)%>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
lm_model <- linear_reg() %>%
set_engine('lm') # create and store a linear regression object
lm_model
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_fit <- fit(lm_workflow, abalone_training)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
knitr::opts_chunk$set(echo = TRUE, message = FALSE,
warning = FALSE)
library(ggplot2)
library(tidyverse)
library(tidymodels)
library(corrplot)
library(ggthemes)
tidymodels_prefer()
diamonds %>%
head()
diamonds %>%
select(is.numeric) %>%
cor() %>%
corrplot(type = 'lower', diag = FALSE,
method = 'color')
diamonds %>%
ggplot(aes(x = price, y = reorder(cut, price), fill = color)) +
geom_boxplot() +
labs(y = "Cut", x = "Price") +
theme_bw()
diamonds %>%
ggplot(aes(x = carat, y = reorder(color, carat))) +
geom_boxplot() +
theme_bw() +
labs(x = "Carat", y = "Color")
diamonds %>%
ggplot(aes(x = price)) +
geom_histogram(bins = 60) +
theme_bw()
set.seed(3435)
diamonds_split <- initial_split(diamonds, prop = 0.80,
strata = price)
diamonds_train <- training(diamonds_split)
diamonds_test <- testing(diamonds_split)
simple_diamonds_recipe <-
recipe(price ~ ., data = diamonds_train)
simple_diamonds_recipe
diamonds_recipe <- recipe(price ~ ., data = diamonds_train) %>%
step_dummy(all_nominal_predictors())
lm_model <- linear_reg() %>%
set_engine("lm")
lm_wflow <- workflow() %>%
add_model(lm_model) %>%
add_recipe(diamonds_recipe)
lm_fit <- fit(lm_wflow, diamonds_train)
diamonds_recipe <- recipe(price ~ ., data = diamonds_train) %>%
step_dummy(all_nominal_predictors())
diamonds_recipe
diamonds_recipe <- recipe(price ~ ., data = diamonds_train) %>%
step_dummy(all_nominal_predictors())
summary(diamonds_recipe)
lm_wflow <- workflow() %>%
add_model(lm_model) %>%
add_recipe(diamonds_recipe)
lm_wflow
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
#step_interact(terms = ~type_yes:shucked_weight+
#longest_shell:diameter+
#shucked_shell:shell_weight) %>%
#step_interact(terms = ~longest_shell:diameter) %>%
#step_interact(terms = ~shucked_weight:shell_weight)%>%
#step_center(all_nominal_predictors()) %>%
#step_scale(all_nominal_predictors())
summary(abalone_recipe)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors())
summary(abalone_recipe)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type_yes:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight)
summary(abalone_recipe)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type_yes:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight)
step_interact(terms = ~longest_shell:diameter) %>%
step_interact(terms = ~shucked_weight:shell_weight)%>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type_yes:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight) %>%
step_interact(terms = ~longest_shell:diameter) %>%
step_interact(terms = ~shucked_weight:shell_weight)%>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~type_yes:shucked_weight+
longest_shell:diameter+
shucked_shell:shell_weight) %>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
View(diamonds_recipe)
View(abalone_recipe)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = type_yes~shucked_weight+
longest_shell~diameter+
shucked_shell~shell_weight) %>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
lm_model <- linear_reg() %>%
set_engine('lm') # create and store a linear regression object
lm_model
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(~ type_yes:shucked_weight+
longest_shell:diameter+
shucked_weight:shell_weight) %>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
simple_abalone_recipe
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(~ type_yes:shucked_weight+
longest_shell:diameter+
shucked_weight:shell_weight) %>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
summary(simple_abalone_recipe)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(~ type_yes:shucked_weight+
longest_shell:diameter+
shucked_weight:shell_weight) %>%
step_center(all_nominal_predictors()) %>%
step_scale(all_nominal_predictors())
summary(abalone_recipe)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
summary(simple_abalone_recipe)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(~ type_yes:shucked_weight+
longest_shell:diameter+
shucked_weight:shell_weight) %>%
step_center() %>%
step_scale()
summary(abalone_recipe)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
simple_abalone_recipe <- recipe(age~.,data = abalone_training)
summary(simple_abalone_recipe)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(~ type_yes:shucked_weight+
longest_shell:diameter+
shucked_weight:shell_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
summary(abalone_recipe)
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(~ type_yes:shucked_weight+
longest_shell:diameter+
shucked_weight:shell_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
summary(abalone_recipe)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
data(penguins, package = "modeldata")
penguins <- penguins %>% na.omit()
rec <- recipe(flipper_length_mm ~ ., data = penguins)
int_mod_1 <- rec %>%
step_interact(terms = ~ bill_depth_mm:bill_length_mm)
data(penguins, package = "modeldata")
penguins <- penguins %>% na.omit()
penguins
rec <- recipe(flipper_length_mm ~ ., data = penguins)
int_mod_1 <- rec %>%
step_interact(terms = ~ bill_depth_mm:bill_length_mm)
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(~ shucked_weight:type_yes+
diameter:longest_shell+
shell_weight:shucked_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
summary(abalone_recipe)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
data(penguins, package = "modeldata")
penguins <- penguins %>% na.omit()
penguins
rec <- recipe(flipper_length_mm ~ ., data = penguins)
int_mod_1 <- rec %>%
step_interact(terms = ~ bill_depth_mm:bill_length_mm)
summary(int_mod_1)
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_training
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~ shucked_weight:type_yes+
diameter:longest_shell+
shell_weight:shucked_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
summary(abalone_recipe)
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~ shucked_weight:type_yes+
diameter:longest_shell+
shell_weight:shucked_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
summary(abalone_recipe)
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~ shucked_weight:type_yes) %>%
step_interact(terms = ~ diameter:longest_shell) %>%
step_interact(terms = ~ shell_weight:shucked_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
summary(abalone_recipe)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~ shucked_weight:starts_with('type')) %>%
step_interact(terms = ~ diameter:longest_shell) %>%
step_interact(terms = ~ shell_weight:shucked_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
summary(abalone_recipe)
lm_fit <- fit(lm_workflow, abalone_training)
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_center(all_predictors()) %>%
step_interact(terms = ~ shucked_weight:type_yes) %>%
step_interact(terms = ~ diameter:longest_shell) %>%
step_interact(terms = ~ shell_weight:shucked_weight) %>%
step_scale(all_predictors())
summary(abalone_recipe)
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy(all_nominal_predictors()) %>%
step_interact(terms = ~ shucked_weight:type_yes+
diameter:longest_shell+
shell_weight:shucked_weight) %>%
#step_interact(terms = ~ diameter:longest_shell) %>%
#step_interact(terms = ~ shell_weight:shucked_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
summary(abalone_recipe)
data1 <- read.csv('/Users/wentaoyu/Documents/UCSB File/Stats/Pstat131/Pstat131/homework-2/homework-2/data/abalone.csv') # import dataset
#data1 <- read.csv('D:/Github/Pstat131/homework-2/homework-2/data/abalone.csv')
age <- data1[9]+1.5 # extract the rings column since age = rings+1.5
data2 <- cbind(data1,age) # add a new column into the dataframe
names(data2)[10] <- 'age' # rename the new column as age
ggplot(data2, aes(age))+
geom_histogram(col='white', binwidth = 1) # plot the age column using histogram to make it access.
set.seed(4177) # set seed to make sure the output is stable
data3 = subset(data2, select = -c(rings)) # new dataframe exclude rings
abalone_split <- initial_split(data3, prop = 0.80) # split the data set, then what is the appropriate percentage, may need a new data set since we cannot include rings and age????
abalone_training <- training(abalone_split) # this is training data set
abalone_testing <- testing(abalone_split) # this is testing data set
set.seed(4177) # set seed to make sure the output is stable
data3 = subset(data2, select = -c(rings)) # new dataframe exclude rings
abalone_split <- initial_split(data3, prop = 0.80) # split the data set, then what is the appropriate percentage, may need a new data set since we cannot include rings and age????
abalone_training <- training(abalone_split) # this is training data set
abalone_testing <- testing(abalone_split) # this is testing data set
set.seed(4177) # set seed to make sure the output is stable
data3 = subset(data2, select = -c(rings)) # new dataframe exclude rings
abalone_split <- initial_split(data3, prop = 0.80) # split the data set, then what is the appropriate percentage, may need a new data set since we cannot include rings and age????
abalone_training <- training(abalone_split) # this is training data set
abalone_testing <- testing(abalone_split) # this is testing data set
library(tidymodels)
library(tidyverse)
data1 <- read.csv('/Users/wentaoyu/Documents/UCSB File/Stats/Pstat131/Pstat131/homework-2/homework-2/data/abalone.csv') # import dataset
#data1 <- read.csv('D:/Github/Pstat131/homework-2/homework-2/data/abalone.csv')
age <- data1[9]+1.5 # extract the rings column since age = rings+1.5
data2 <- cbind(data1,age) # add a new column into the dataframe
names(data2)[10] <- 'age' # rename the new column as age
ggplot(data2, aes(age))+
geom_histogram(col='white', binwidth = 1) # plot the age column using histogram to make it access.
set.seed(4177) # set seed to make sure the output is stable
data3 = subset(data2, select = -c(rings)) # new dataframe exclude rings
abalone_split <- initial_split(data3, prop = 0.80) # split the data set, then what is the appropriate percentage, may need a new data set since we cannot include rings and age????
abalone_training <- training(abalone_split) # this is training data set
abalone_testing <- testing(abalone_split) # this is testing data set
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy_multi_choise(all_nominal_predictors()) %>%
step_interact(terms = ~ shucked_weight:type_yes+
diameter:longest_shell+
shell_weight:shucked_weight) %>%
#step_interact(terms = ~ diameter:longest_shell) %>%
#step_interact(terms = ~ shell_weight:shucked_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
#simple_abalone_recipe <- recipe(age~.,data = abalone_training)
abalone_recipe <- recipe(age~., data = abalone_training) %>%
step_dummy_multi_choice(all_nominal_predictors()) %>%
step_interact(terms = ~ shucked_weight:type_yes+
diameter:longest_shell+
shell_weight:shucked_weight) %>%
#step_interact(terms = ~ diameter:longest_shell) %>%
#step_interact(terms = ~ shell_weight:shucked_weight) %>%
step_center(all_predictors()) %>%
step_scale(all_predictors())
summary(abalone_recipe)
lm_model <- linear_reg() %>%
set_engine('lm') # create and store a linear regression object
lm_model
lm_workflow <- workflow() %>% # set up a new workflow
add_model(lm_model) %>% # add the linear model from question 4
add_recipe(abalone_recipe) # add the recipe from question 3
lm_workflow
lm_fit <- fit(lm_workflow, abalone_training)
